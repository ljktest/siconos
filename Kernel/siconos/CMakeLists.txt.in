# -*- cmake -*-

SET(CMAKE_MODULE_PATH @CMAKE_INSTALL_PREFIX@/share/siconos-kernel/cmake)

INCLUDE(CMakeImportBuildSettings)
CMAKE_IMPORT_BUILD_SETTINGS(BuildSettings)
INCLUDE(LibraryDependencies)
INCLUDE(Settings)

GET_FILENAME_COMPONENT(_EXE ${MAIN_SOURCE} NAME_WE)
ADD_EXECUTABLE(${_EXE} ${MAIN_SOURCE})  

TARGET_LINK_LIBRARIES(${_EXE} 
  ${Siconoskernel_shared_LIB_DEPENDS})

FOREACH(_D ${PROJECT_INCLUDE_DIRECTORIES})
  INCLUDE_DIRECTORIES(${_D})
ENDFOREACH(_D ${PROJECT_INCLUDE_DIRECTORIES})

FOREACH(_D ${PROJECT_LINK_DIRECTORIES})
  LINK_DIRECTORIES(${_D})
ENDFOREACH(_D ${PROJECT_LINK_DIRECTORIES})

FOREACH(_L ${PROJECT_LINK_LIBRARIES})
  TARGET_LINK_LIBRARIES(${_EXE} ${_L})
ENDFOREACH(_L ${PROJECT_LINK_LIBRARIES})

FOREACH(_D ${PROJECT_FORTRAN_COMPILER_LIB_DIRECTORIES})
  LINK_DIRECTORIES(${_D})
ENDFOREACH(_D ${PROJECT_FORTRAN_COMPILER_LIB_DIRECTORIES})

FOREACH(_L ${PROJECT_FORTRAN_LIBRARIES})
  TARGET_LINK_LIBRARIES(${_EXE} ${_L})
ENDFOREACH(_L ${PROJECT_FORTRAN_LIBRARIES})

IF(EXISTS ${_EXE}Plugin.cpp)
  ADD_LIBRARY(${_EXE}Plugin SHARED ./${_EXE}Plugin.cpp)
  SET_TARGET_PROPERTIES(${_EXE}Plugin  PROPERTIES PREFIX "")
ENDIF(EXISTS ${_EXE}Plugin.cpp)
