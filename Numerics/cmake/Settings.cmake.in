# -*- cmake -*-

IF(NOT SICONOS_PREFIX)
  message(FATAL_ERROR "Undefined SICONOS_PREFIX")
ENDIF()

# broken atlas/cblas.h and atlas/clapack.h on some distribs (Debian)
SET(COMPILE_TIME_ATLAS_INCLUDE_PATH @ATLAS_INCLUDE_PATH@)

# a build with atlas
IF(COMPILE_TIME_ATLAS_INCLUDE_PATH)
  IF(COMPILE_TIME_ATLAS_INCLUDE_PATH MATCHES @CMAKE_SOURCE_DIR@)
    SET(PROJECT_INCLUDE_DIRECTORIES ${SICONOS_PREFIX}/include/Siconos/@PROJECT_SHORT_NAME@/AtlasLocal;${SICONOS_PREFIX}/include/Siconos/@PROJECT_SHORT_NAME@/AtlasLocal/atlas;@MY_AT@CHECKED_@PROJECT_NAME@_INCLUDE_DIRECTORIES@MY_AT@;${SICONOS_PREFIX}/@@PROJECT_NAME@_INSTALL_INCLUDE_DIR@;)
  ELSE(COMPILE_TIME_ATLAS_INCLUDE_PATH MATCHES @CMAKE_SOURCE_DIR@)
    SET(PROJECT_INCLUDE_DIRECTORIES @MY_AT@CHECKED_@PROJECT_NAME@_INCLUDE_DIRECTORIES@MY_AT@;${SICONOS_PREFIX}/@@PROJECT_NAME@_INSTALL_INCLUDE_DIR@;)
  ENDIF(COMPILE_TIME_ATLAS_INCLUDE_PATH MATCHES @CMAKE_SOURCE_DIR@)

# without atlas
ELSE(COMPILE_TIME_ATLAS_INCLUDE_PATH)
  SET(PROJECT_INCLUDE_DIRECTORIES @MY_AT@CHECKED_@PROJECT_NAME@_INCLUDE_DIRECTORIES@MY_AT@;${SICONOS_PREFIX}/@@PROJECT_NAME@_INSTALL_INCLUDE_DIR@;)
ENDIF(COMPILE_TIME_ATLAS_INCLUDE_PATH)

# Release, Debug, etc.
SET(COMPILE_TIME_BUILD_TYPE @CMAKE_BUILD_TYPE@)

SET(PROJECT_LINK_DIRECTORIES @@PROJECT_NAME@_LINK_DIRECTORIES@;${SICONOS_PREFIX}/@@PROJECT_NAME@_INSTALL_LIB_DIR@;)

SET(PROJECT_LINK_LIBRARIES ${SICONOS_PREFIX}/@MY_AT@@PROJECT_NAME@_INSTALL_LIB_DIR@MY_AT@/@SiconosNumerics_LIBRARY_NAME@@EXTRA_EXT@;${SICONOS_PREFIX}/@MY_AT@@PROJECT_NAME@_INSTALL_LIB_DIR@MY_AT@/@MY_AT@@PROJECT_NAME@_SHARED_LIB_NAME@@EXTRA_EXT@)

IF(CMAKE_CROSSCOMPILING)
  SET(CMAKE_FIND_ROOT_PATH @CMAKE_INSTALL_PREFIX@ @CMAKE_FIND_ROOT_PATH@) 
  IF(CMAKE_SYSTEM_NAME MATCHES "Windows")
    SET(CROSSCOMPILING_LINUX_TO_WINDOWS TRUE)
    SET(CMAKE_FIND_LIBRARY_SUFFIXES ".dll.a" @CMAKE_FIND_LIBRARY_SUFFIXES@)
    SET(CMAKE_FIND_LIBRARY_PREFIXES "lib" @CMAKE_FIND_LIBRARY_PREFIXES@)
  ENDIF()
ENDIF()

SET(COMPILE_TIME_CXX_FLAGS "@CMAKE_CXX_FLAGS@")
SET(COMPILE_TIME_C_FLAGS "@CMAKE_C_FLAGS@")
SET(COMPILE_TIME_Fortran_FLAGS "@CMAKE_Fortran_FLAGS@")

