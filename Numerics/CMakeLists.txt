#
# Siconos Numerics : general configuration
#
CMAKE_MINIMUM_REQUIRED(VERSION 2.4.4)
PROJECT(Siconos_Numerics Fortran)

SET(MAJOR_VERSION 2)
SET(MINOR_VERSION 2)
SET(PATCH_VERSION 1)

# Cmake modules
SET(CMAKE_MODULE_PATH ${PROJECT_SOURCE_DIR}/cmake)

INCLUDE(fortran)

INCLUDE(LibraryProjectSetup)

FIND_PACKAGE(LAPACK REQUIRED)

MESSAGE(STATUS "LAPACK_LINKER_FLAGS = ${LAPACK_LINKER_FLAGS}")
MESSAGE(STATUS "LAPACK_LIBRARIES = ${LAPACK_LIBRARIES}")

# Minimal config.h generation (cf autoheaders)
IF(BLAS_FOUND)
  SET(HAVE_BLAS 1)
ENDIF(BLAS_FOUND)

IF(LAPACK_FOUND)
  SET(HAVE_LAPACK 1)
ENDIF(LAPACK_FOUND)

IF(ATLAS_FOUND)
  SET(HAVE_ATLAS 1)
ENDIF(ATLAS_FOUND)

CONFIGURE_FILE(config.h.cmake config.h)
INCLUDE_DIRECTORIES(${CMAKE_BINARY_DIR})

# Library sources
SUBDIRS(src)
