#
# use mksenv --distrib=<distrib> --pkgs=pkg1,pkg2,pkg3,... --split=[true,false] <thisfile.yml> [--docker,--script]
#

##############################################################################
wildcard: any

match:
  ubuntu: debian
##############################################################################
installer:
  any:
    fedora: dnf install -y
    debian: apt-get install -y

updater:
  any:
    debian: apt-get update -y 
##############################################################################
env:
  clang:
    any:
      CC=/usr/bin/clang
##############################################################################
pkgs:

  # Numerics minimal build environments
  # needs -DWITH_DOXYGEN_WARNINGS=0
  numerics-minimal-gcc:
    any:
      - make
      - cmake 
      - gcc
      - gfortran
      - atlas-lapack

  numerics-minimal-clang:
    any:
      - make
      - cmake 
      - clang
      - gfortran
      - atlas-lapack
##############################################################################
  gfortran:
    fedora: gcc-gfortran

  c++:
    fedora: gcc-c++
  
  boost:
    fedora: boost-devel
      
  gmp:
    fedora: gmp-devel

  cppunit:
    fedora: 
      - cppunit
      - cppunit-devel

  hdf5:
    fedora: hdf5-devel
    debian: libhdf5-dev

  h5py:
    fedora: h5py
    debian: python-h5py

  openblas-lapacke:
    debian:
      - libopenblas-dev
      - liblapacke-dev
    fedora:
      - openblas-devel
      - lapack-devel

  atlas-lapack:
    debian:
      - libblas-dev
      - liblapack-dev
      - libatlas-base-dev
      - libatlas-dev

  oce:
    debian:
      - liboce-foundation-dev
      - liboce-modeling-dev
      - liboce-ocaf-dev
      - liboce-visualization-dev
      - oce-draw

    fedora:

  mumps:
    debian-7.8:
      - libopenmpi-dev
      - openssh-client
      - libscalapack-mpi-dev
      - libscotchmetis-dev
      - libmumps-dev

    debian:
      - libopenmpi-dev
      - openssh-client
      - libscalapack-mpi-dev
      - libmetis-dev
      - libmumps-dev

    fedora:
      - ptscotch-openmpi 
      - ptscotch-openmpi-devel 
      - blacs-openmpi-devel
      - openmpi-devel
      - scalapack-openmpi
      - MUMPS-openmpi-devel
    
  fclib:
    any:
      command: svn checkout svn://scm.gforge.inria.fr/svnroot/fclib/ &&
               cd fclib/trunk &&
               cmake . -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE=Release &&
               make &&
               make install


