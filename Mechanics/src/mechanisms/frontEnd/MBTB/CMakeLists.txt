SET(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} ${CMAKE_CURRENT_SOURCE_DIR}/../../cmake/)
FIND_PACKAGE(SWIG REQUIRED)
INCLUDE(${SWIG_USE_FILE})


FIND_PACKAGE(SiconosNumerics)
FIND_PACKAGE(SiconosKernel)

COMPILE_WITH(BLAS REQUIRED)
COMPILE_WITH(LAPACK REQUIRED COMPLETE)


# #FIND_PACKAGE(OpenCascade)

# FIND_PACKAGE(PythonLibs)

FIND_PACKAGE(PythonInterp)

# on ubuntu precise with cmake >= 2.8.8 pythonlibs find python 3.0
# before python 2.7 (in Release but not in Debug ...)
#SET(Python_ADDITIONAL_VERSIONS "2.6;2.7")

FIND_PACKAGE(PythonLibs)

MESSAGE("Python libs version : ${PYTHONLIBS_VERSION_STRING}")

MESSAGE("PYTHON EXECUTABLE : ${PYTHON_EXECUTABLE}")
MESSAGE("Python_ADDITIONAL_VERSIONS : ${Python_ADDITIONAL_VERSIONS}")
MESSAGE("Python_FRAMEWORKS : ${Python_FRAMEWORKS}")

MESSAGE("PYTHON INCLUDE DIR : ${PYTHON_INCLUDE_DIR}")
MESSAGE("PYTHON LIBRARIES : ${PYTHON_LIBRARIES}")



INCLUDE_DIRECTORIES(${PYTHON_INCLUDE_PATH})
INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR})


COMPILE_WITH(Boost REQUIRED)
COMPILE_WITH(Python_Numpy REQUIRED)



SET(LIB_MBTB_DEP  TIMERMBTB CADMBTB MBTB ${SiconosKernel_LIBRARIES} ${SiconosNumerics_LIBRARIES})

INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}
  ${CMAKE_CURRENT_SOURCE_DIR}/../../MBTB ${SiconosKernel_INCLUDE_DIRS}
  ${SiconosNumerics_INCLUDE_DIRS} ${ATLAS_INCLUDE_DIR})

SET_SOURCE_FILES_PROPERTIES(mbtb.i PROPERTIES CPLUSPLUS ON)
SWIG_ADD_MODULE(mbtb python mbtb.i)
SWIG_LINK_LIBRARIES(mbtb ${PYTHON_LIBRARIES} ${LIB_MBTB_DEP})
