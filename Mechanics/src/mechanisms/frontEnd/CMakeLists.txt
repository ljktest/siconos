# Set minimum version for cmake
cmake_minimum_required(VERSION 2.8.7)

# MACOSX_RPATH required from cmake 3.0.
# See http://www.kitware.com/blog/home/post/510
if(POLICY CMP0042)
  cmake_policy(SET CMP0042 OLD)
endif()

SET(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} ${CMAKE_CURRENT_SOURCE_DIR}/../../cmake/)

MESSAGE(STATUS "in ${CMAKE_CURRENT_SOURCE_DIR}/")

FILE(GLOB SCRIPT_FILES RELATIVE ${CMAKE_CURRENT_SOURCE_DIR} *.py)

MESSAGE(STATUS "Files to be installed " ${SCRIPT_FILES} )

IF(SCRIPT_FILES)
  FOREACH(_FILE ${SCRIPT_FILES})
    GET_FILENAME_COMPONENT(_BFILE ${_FILE} NAME)
    #GET_FILENAME_COMPONENT(_PFILE ${_FILE} PATH)
    #MESSAGE(STATUS "PATH = ${_PFILE}  ")
    #FILE(MAKE_DIRECTORY ${_PFILE})
    CONFIGURE_FILE(${_FILE} ${_BFILE} @ONLY)
    MESSAGE(STATUS "CMAKE_BINARY_DIR = ${CMAKE_BINARY_DIR}  ")
    INSTALL(FILES ${CMAKE_CURRENT_BINARY_DIR}/${_BFILE} DESTINATION bin RENAME ${_BFILE}
      PERMISSIONS OWNER_READ GROUP_READ WORLD_READ 
      OWNER_EXECUTE GROUP_EXECUTE WORLD_EXECUTE)
    MESSAGE(STATUS "Install ${_BFILE} in ${CMAKE_CURRENT_BINARY_DIR}/${_BFILE}  ")
  ENDFOREACH(_FILE ${SCRIPT_FILES})
ENDIF(SCRIPT_FILES)



add_subdirectory(CADMBTB)
add_subdirectory(MBTB)