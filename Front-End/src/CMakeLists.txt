
COMPILE_WITH(SiconosKernel REQUIRED)
COMPILE_WITH(SiconosNumerics REQUIRED)
COMPILE_WITH(BLAS REQUIRED)
COMPILE_WITH(LAPACK REQUIRED)
COMPILE_WITH(ATLAS REQUIRED)
COMPILE_WITH(LibXml2 REQUIRED)
COMPILE_WITH(PythonInterp REQUIRED)
COMPILE_WITH(PythonLibs REQUIRED)
COMPILE_WITH(Boost REQUIRED)

SET(SICONOS_HEADERS SiconosKernel.hpp SparseBlockMatrix.h)

CONFIGURE_FILE(doxygen.py ${CMAKE_CURRENT_BINARY_DIR}/doxygen.py COPYONLY)

SET(PYH)
FOREACH(_H ${SICONOS_HEADERS})
  IF(PYH)
    SET(PYH "${PYH},'${_H}'")
  ELSE(PYH)
    SET(PYH "'${_H}'")
  ENDIF(PYH)
ENDFOREACH(_H ${SICONOS_HEADERS})

CONFIGURE_FILE(SiconosGenerator.py.in ${CMAKE_CURRENT_BINARY_DIR}/SiconosGenerator.py)
CONFIGURE_FILE(CMakeLists.txt.in ${CMAKE_CURRENT_BINARY_DIR}/Siconos/CMakeLists.txt @ONLY)

MESSAGE(STATUS "")
MESSAGE(STATUS "Generating boost python wrappers. Please wait ..." )


EXECUTE_PROCESS(
  COMMAND ${PYTHON_EXECUTABLE} SiconosGenerator.py
  WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR})

SUBDIRS(${CMAKE_CURRENT_BINARY_DIR}/Siconos)

#
# Log 
#

IF(PRINT_ENV)
  INCLUDE(CMakeLog)
ENDIF(PRINT_ENV)

IF(PRINT_VAR)
  MESSAGE(STATUS)
  PRINT_VAR(${PRINT_VAR})
  MESSAGE(STATUS)
ENDIF(PRINT_VAR)
